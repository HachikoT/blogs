- [go字符串](#go字符串)
- [unicode字符集和utf-8编码](#unicode字符集和utf-8编码)

# go字符串

go中字符串类型为`string`，是一个不可修改的`utf-8`编码的字符序列。

- **初始值为空字符串`""`，不是`nil`，也不能为`nil`**
- **无法修改字符串内容**

```go
// runtime/string.go
type stringStruct struct {
    str unsafe.Pointer  // 字符串的首地址
    len int             // 字符串的长度
}
```

# unicode字符集和utf-8编码

unicode字符集涵盖目前人类使用的所有字符，并为每个字符分配一个唯一的字符编号，称为unicode码点，unicode码点需要4字节才能完整存储，在golang中用`rune`类型存储，等价于`int32`类型。

由于每个字符都用4字节保存太占空间了，尤其是在使用ASCII码的时候，所以设计了utf-8编码，将unicode码点编码为1到4字节大小。

| Unicode 码点范围（十六进制） |      UTF-8 编码格式（二进制）       | 字节数 |
| :--------------------------: | :---------------------------------: | :----: |
|       U+0000 – U+007F        |              0xxxxxxx               | 1字节  |
|       U+0080 – U+07FF        |          110xxxxx 10xxxxxx          | 2字节  |
|       U+0800 – U+FFFF        |     1110xxxx 10xxxxxx 10xxxxxx      | 3字节  |
|      U+10000 – U+10FFFF      | 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx | 4字节  |
